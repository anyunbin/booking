<!--pages/friends/addFriend/addFriend.wxml-->
<view class="container">
  <view class="header">
    <view class="title">æ·»åŠ å¥½å‹</view>
    <view class="subtitle">é€šè¿‡æ˜µç§°æœç´¢å¹¶æ·»åŠ å¥½å‹</view>
  </view>

  <view class="search-section">
    <view class="search-box">
      <text class="search-icon">ğŸ”</text>
      <input class="search-input" type="text" placeholder="è¯·è¾“å…¥å¥½å‹æ˜µç§°æˆ–ç”¨æˆ·å" value="{{searchKeyword}}" bindinput="onSearchInput" bindconfirm="searchUsers" />
      <button class="btn-search" bindtap="searchUsers" wx:if="{{searchKeyword}}">æœç´¢</button>
    </view>
  </view>

  <!-- æœç´¢ç»“æœåˆ—è¡¨ -->
  <view class="search-results" wx:if="{{searchResults.length > 0}}">
    <view class="result-header">
      <text>æ‰¾åˆ° {{searchResults.length}} ä¸ªç”¨æˆ·</text>
    </view>
    <view class="result-list">
      <view class="result-item" wx:for="{{searchResults}}" wx:key="id">
        <view class="result-avatar">
          <image wx:if="{{item.avatar_url}}" src="{{item.avatar_url}}" mode="aspectFill"></image>
          <text wx:else>{{item.avatarText}}</text>
        </view>
        <view class="result-info">
          <view class="result-name">{{item.nickname || item.name || 'æœªè®¾ç½®æ˜µç§°'}}</view>
          <view class="result-username">@{{item.username}}</view>
        </view>
        <button class="btn-add {{item.isFriend ? 'btn-disabled' : ''}}" 
                bindtap="addFriend" 
                data-friend="{{item}}"
                disabled="{{item.isFriend}}">
          {{item.isFriend ? 'å·²æ˜¯å¥½å‹' : 'æ·»åŠ '}}
        </button>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{searchKeyword && searchResults.length === 0 && !isSearching}}">
    <text class="empty-icon">ğŸ”</text>
    <text class="empty-text">æœªæ‰¾åˆ°ç›¸å…³ç”¨æˆ·</text>
    <text class="empty-hint">è¯·å°è¯•å…¶ä»–å…³é”®è¯</text>
  </view>

  <!-- åˆå§‹æç¤º -->
  <view class="empty-state" wx:if="{{!searchKeyword}}">
    <text class="empty-icon">ğŸ‘¥</text>
    <text class="empty-text">æœç´¢å¥½å‹</text>
    <text class="empty-hint">è¾“å…¥æ˜µç§°æˆ–ç”¨æˆ·åæœç´¢</text>
  </view>
</view>

