<!--pages/login/login.wxml-->
<view class="login-container">
  <view class="login-header">
    <view class="logo">📅</view>
    <view class="title">我的预约</view>
    <view class="subtitle">管理日程，与好友分享</view>
  </view>

  <view class="login-content">
    <view class="tab-bar">
      <view class="tab-item {{isLogin ? 'active' : ''}}" bindtap="switchToLogin">登录</view>
      <view class="tab-item {{!isLogin ? 'active' : ''}}" bindtap="switchToRegister">注册</view>
    </view>

    <view class="form-container">
      <!-- 登录表单 -->
      <view class="form-group" wx:if="{{isLogin}}">
        <view class="input-wrapper">
          <text class="input-icon">👤</text>
          <input class="input" type="text" placeholder="请输入用户名" value="{{loginUsername}}" bindinput="onLoginUsernameInput" />
        </view>
        <view class="input-wrapper">
          <text class="input-icon">🔒</text>
          <input class="input" type="{{showLoginPassword ? 'text' : 'password'}}" placeholder="请输入密码" value="{{loginPassword}}" bindinput="onLoginPasswordInput" />
          <view class="password-toggle" bindtap="toggleLoginPasswordVisibility">
            <text class="toggle-icon">{{showLoginPassword ? '👁️' : '👁️‍🗨️'}}</text>
          </view>
        </view>
        <button class="submit-button" bindtap="handleLogin" loading="{{isSubmitting}}">登录</button>
      </view>

      <!-- 注册表单 -->
      <view class="form-group" wx:if="{{!isLogin}}">
        <view class="input-wrapper">
          <text class="input-icon">👤</text>
          <input class="input" type="text" placeholder="请输入用户名（3-20个字符）" value="{{registerUsername}}" bindinput="onRegisterUsernameInput" />
        </view>
        <view class="input-wrapper">
          <text class="input-icon">🔒</text>
          <input class="input" type="{{showRegisterPassword ? 'text' : 'password'}}" placeholder="请输入密码（至少6个字符）" value="{{registerPassword}}" bindinput="onRegisterPasswordInput" />
          <view class="password-toggle" bindtap="toggleRegisterPasswordVisibility">
            <text class="toggle-icon">{{showRegisterPassword ? '👁️' : '👁️‍🗨️'}}</text>
          </view>
        </view>
        <view class="input-wrapper">
          <text class="input-icon">🔒</text>
          <input class="input" type="{{showRegisterPasswordConfirm ? 'text' : 'password'}}" placeholder="请确认密码" value="{{registerPasswordConfirm}}" bindinput="onRegisterPasswordConfirmInput" />
          <view class="password-toggle" bindtap="toggleRegisterPasswordConfirmVisibility">
            <text class="toggle-icon">{{showRegisterPasswordConfirm ? '👁️' : '👁️‍🗨️'}}</text>
          </view>
        </view>
        <view class="input-wrapper">
          <text class="input-icon">📝</text>
          <input class="input" type="text" placeholder="请输入昵称（可选）" value="{{registerNickname}}" bindinput="onRegisterNicknameInput" />
        </view>
        <button class="submit-button" bindtap="handleRegister" loading="{{isSubmitting}}">注册</button>
      </view>
    </view>
  </view>
</view>

