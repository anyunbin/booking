<!--pages/owner/schedule/schedule.wxml-->
<view class="container">
  <view class="header">
    <view class="title">æ—¥ç¨‹ç®¡ç†</view>
    <view class="subtitle">ç®¡ç†æ‚¨çš„æ—¥ç¨‹å®‰æ’</view>
  </view>

  <view class="add-methods">
    <button class="method-btn voice-btn" bindtap="addByVoice">
      <view class="method-icon">ğŸ¤</view>
      <view class="method-text">è¯­éŸ³è®¾ç½®</view>
    </button>
    <button class="method-btn manual-btn" bindtap="addManually">
      <view class="method-icon">âœï¸</view>
      <view class="method-text">æ‰‹åŠ¨è®¾ç½®</view>
    </button>
  </view>

  <view class="schedule-list">
    <view class="date-section" wx:for="{{schedules}}" wx:key="date">
      <view class="date-header">{{item.date}}</view>
      <view class="schedule-items">
        <view class="schedule-item" wx:for="{{item.items}}" wx:key="id" wx:for-item="schedule">
          <view class="schedule-info">
            <view class="schedule-time">{{schedule.startTime}} - {{schedule.endTime}}</view>
            <view class="schedule-status" wx:if="{{schedule.status}}">
              {{schedule.status === 'booked' ? 'å·²é¢„çº¦' : 'ç©ºé—²'}}
            </view>
          </view>
          <button class="btn-delete" size="mini" bindtap="deleteSchedule" data-id="{{schedule.id}}">åˆ é™¤</button>
        </view>
      </view>
    </view>
    
    <view class="empty" wx:if="{{schedules.length === 0}}">
      æš‚æ— æ—¥ç¨‹å®‰æ’
    </view>
  </view>

  <!-- æ‰‹åŠ¨æ·»åŠ æ—¥ç¨‹å¼¹çª— -->
  <view class="modal" wx:if="{{showManualModal}}" bindtap="closeModal">
    <view class="modal-content" catchtap="stopPropagation">
      <view class="modal-title">æ‰‹åŠ¨æ·»åŠ æ—¥ç¨‹</view>
      <view class="form-group">
        <view class="label">æ—¥æœŸ</view>
        <picker mode="date" value="{{scheduleDate}}" bindchange="onDateChange">
          <view class="picker">{{scheduleDate || 'è¯·é€‰æ‹©æ—¥æœŸ'}}</view>
        </picker>
      </view>
      <view class="form-group">
        <view class="label">å¼€å§‹æ—¶é—´</view>
        <picker mode="time" value="{{scheduleStartTime}}" bindchange="onScheduleStartTimeChange">
          <view class="picker">{{scheduleStartTime || 'è¯·é€‰æ‹©å¼€å§‹æ—¶é—´'}}</view>
        </picker>
      </view>
      <view class="form-group">
        <view class="label">ç»“æŸæ—¶é—´</view>
        <picker mode="time" value="{{scheduleEndTime}}" bindchange="onScheduleEndTimeChange">
          <view class="picker">{{scheduleEndTime || 'è¯·é€‰æ‹©ç»“æŸæ—¶é—´'}}</view>
        </picker>
      </view>
      <view class="modal-buttons">
        <button class="btn-cancel" bindtap="closeModal">å–æ¶ˆ</button>
        <button class="btn-confirm" bindtap="confirmAddSchedule">ç¡®è®¤</button>
      </view>
    </view>
  </view>
</view>

