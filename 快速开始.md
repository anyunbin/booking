# 🚀 快速开始 - 在手机上使用小程序

## 第一步：启动后端服务器

### 方式一：使用启动脚本（推荐）

```bash
cd /Users/anyunbin/LLM/booking
./start.sh
```

脚本会自动：
- 检测本机IP地址
- 显示配置信息
- 启动服务器

### 方式二：手动启动

```bash
# 1. 安装依赖（首次运行）
npm install

# 2. 获取本机IP地址
ifconfig | grep "inet " | grep -v 127.0.0.1

# 3. 启动服务器
npm start
```

## 第二步：配置小程序API地址

### 1. 打开 `app.js` 文件

找到这一行：
```javascript
apiBaseUrl: 'http://localhost:3000/api'
```

### 2. 修改为你的IP地址

将 `localhost` 替换为你的实际IP地址，例如：
```javascript
apiBaseUrl: 'http://11.0.119.60:3000/api'  // 替换为你的IP
```

**如何获取IP地址？**
- 运行启动脚本会显示IP地址
- 或运行命令：`ifconfig | grep "inet " | grep -v 127.0.0.1`

## 第三步：配置微信开发者工具

1. **打开微信开发者工具**
2. **导入项目**：
   - 项目目录：`/Users/anyunbin/LLM/booking`
   - AppID：使用测试号或你的小程序AppID
3. **重要设置**：
   - 点击右上角"详情"
   - 在"本地设置"中
   - ✅ **勾选"不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书"**

## 第四步：在手机上预览

### 方法一：预览（推荐）

1. 在微信开发者工具中点击 **"预览"** 按钮
2. 用微信扫描二维码
3. 在手机上打开小程序

### 方法二：真机调试

1. 在微信开发者工具中点击 **"真机调试"** 按钮
2. 用微信扫描二维码
3. 可以查看调试信息和日志

## ✅ 检查清单

在手机上使用前，确保：

- [ ] 后端服务器正在运行（终端显示 "服务器运行在 http://localhost:3000"）
- [ ] `app.js` 中的 `apiBaseUrl` 已修改为你的IP地址
- [ ] 手机和电脑连接在**同一个WiFi网络**
- [ ] 微信开发者工具中已关闭域名校验
- [ ] 已用微信扫描预览二维码

## 🔧 常见问题

### ❌ 无法连接服务器

**检查：**
1. 后端服务器是否正在运行？
2. IP地址是否正确？（不是localhost）
3. 手机和电脑是否在同一WiFi？
4. 防火墙是否阻止了3000端口？

**解决方案：**
```bash
# 检查服务器是否运行
curl http://localhost:3000/api/schedules

# 检查IP地址
ifconfig | grep "inet " | grep -v 127.0.0.1

# 测试手机能否访问（在手机上打开浏览器）
# 访问：http://你的IP:3000/api/schedules
```

### ❌ 预览二维码无法扫描

- 确保微信版本是最新的
- 尝试使用真机调试功能
- 检查网络连接

### ❌ 数据不显示

1. 打开微信开发者工具
2. 查看"网络"面板，检查API请求
3. 查看"控制台"面板，查看错误信息
4. 检查后端服务器日志

### ❌ IP地址变化

如果电脑重新连接WiFi，IP地址可能会变化：

1. 重新运行启动脚本获取新IP
2. 更新 `app.js` 中的 `apiBaseUrl`
3. 在微信开发者工具中重新编译

## 📝 完整步骤总结

```bash
# 1. 启动服务器（会自动显示IP地址）
./start.sh

# 2. 修改 app.js 中的 apiBaseUrl 为显示的IP地址

# 3. 在微信开发者工具中：
#    - 导入项目
#    - 关闭域名校验
#    - 点击"预览"
#    - 用微信扫描二维码

# 4. 在手机上测试功能
```

## 🎉 成功标志

如果一切正常，你应该能够：
- ✅ 在手机上看到小程序首页
- ✅ 创建日程
- ✅ 查看好友列表
- ✅ 所有功能正常工作

---

**需要帮助？** 查看 `使用指南.md` 获取更详细的说明。

